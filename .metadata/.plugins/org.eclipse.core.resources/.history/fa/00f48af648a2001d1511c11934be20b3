public class DigitalReceipt extends Receipt {
	private String email;

	public DigitalReceipt(Store store, int numItems, double total, String receiptID, String email) {
		super(store, numItems, total, receiptID);
		this.email = email;

	}
	
	public DigitalReceipt(Store store, int numItems, double total, String receiptID) {
		super(store, numItems, total, receiptID);
		this.email = "";

	}

	public DigitalReceipt(Store store, double total, String receiptID) {
		super(store, total, receiptID);
		this.email = "";
	}

	public String getEmail() {
		return email;
	}

	public void setEmail(String email) {
		this.email = email;
	}

	public static boolean validateEmail(String email) {
		// once in a while, regex is better
		// comment out the println's for cleaner console output
		
		// check to see if there is one and only '@' by checking
		// for the first occurence and '@' and the last
		int idx = email.indexOf('@');
		int idx2 = email.lastIndexOf('@');
		if (idx != idx2) { 
			System.out.println("more than 1 '@'");
			return false;
		}
		if (idx == -1) {
			System.out.println("Missing '@'");
			return false;
		}
		
		// check to make sure there's at least room for 
		// top-level-domain (TLD) after '@'
		// meaning name@.com would *so far* be considered valid
		if (idx >= email.length() - 5) { 
			System.out.println("'@' does not allow space for TLD");
			return false;
		}
		// split email into it's two components, we won't get 
		// index out of bounds due to previous checks
		String name = email.substring(0, idx);     
		String domain = email.substring(idx + 1);  
		
		// if toUpperCase == toLowerCase then there are no letters in name
		if (name.toUpperCase() == name.toLowerCase()) { 
			System.out.println("Name does not include at least 1 letter");
			return false;
		}
		
		// start analysis of TLD, the period must be at 
		// index len() - 4 to pass
		idx = domain.lastIndexOf('.');
		if (idx != domain.length() - 4) { 
			System.out.println("TLD incorrect size or missing");
			return false;
		}
		
		// analyse each char in TLD
		char[] TLD = domain.substring(domain.length() - 3).toCharArray();
		for (char c : TLD) {	
			if (!Character.isLetter(c)) {
				System.out.println("TLD includes non-letter character");
				return false;
			}
		}
		// we passed all of the tests for the question!
		return true;
	}
	
	@Override
	public String toString() {
		return super.toString() + "\n\tDigital copy sent to: " + this.email;
	}
}
